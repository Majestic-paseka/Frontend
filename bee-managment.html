<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Улей Земли - Учёт пчёл</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="images/new_logo.png" alt="Логотип фермы">
            <h1 class="logo-text">Улей Земли</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Главная</a></li>
                <li><a href="bee-management.html" class="active">Учёт пчёл</a></li>
                <li><a href="honey-management.html">Учёт мёда</a></li>
                <li><a href="flower-management.html">Учёт цветов</a></li>
                <li><a href="profile.html">Профиль</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="bee-management">
            <h2>Учёт пчелиных семей</h2>
            <div class="filters">
                <label for="health-filter">Фильтр по состоянию здоровья:</label>
                <select id="health-filter" name="health">
                    <option value="all">Все</option>
                    <option value="good">Хорошее</option>
                    <option value="bad">Плохое</option>
                </select>
                
                <label for="bee-count-filter">Фильтр по количеству пчёл:</label>
                <input type="number" id="bee-count-filter" name="beeCount" placeholder="Мин. количество">
            </div>            
            <table class="bee-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Количество пчёл</th>
                        <th>Состояние здоровья</th>
                        <th>Медовый сбор (кг)</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>500</td>
                        <td>Хорошее</td>
                        <td>50</td>
                        <td>
                            <button class="edit-button">Редактировать</button>
                            <button class="delete-button">Удалить</button>
                            <button class="details-button">Подробнее</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>300</td>
                        <td>Плохое</td>
                        <td>20</td>
                        <td>
                            <button class="edit-button">Редактировать</button>
                            <button class="delete-button">Удалить</button>
                            <button class="details-button">Подробнее</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button class="add-button">Добавить пчелиную семью</button>
        </section>

        <!-- Модальное окно -->
      <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Добавить пчелиную семью</h2>
            <form id="add-bee-form" action="#" method="post">
                <div class="form-group">
                    <label for="bee-id">ID:</label>
                    <input type="text" id="bee-id" name="beeId" required placeholder="Введите ID">
                </div>
                <div class="form-group">
                    <label for="bee-count">Количество пчёл:</label>
                    <input type="number" id="bee-count" name="beeCount" required placeholder="Введите количество">
                </div>
                <div class="form-group">
                    <label for="bee-health">Состояние здоровья:</label>
                    <select id="bee-health" name="beeHealth" required>
                        <option value="good">Хорошее</option>
                        <option value="bad">Плохое</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="honey-collection">Медовый сбор (кг):</label>
                    <input type="number" id="honey-collection" name="honeyCollection" step="0.1" required placeholder="Введите сбор">
                </div>
                <button type="submit" class="submit-button">Сохранить</button>
            </form>
        </div>
    </div> 

    <!-- Модальное окно для подтверждения удаления -->
<div id="delete-modal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="delete-close-button">&times;</span>
      <h2>Подтверждение удаления</h2>
      <p>Вы действительно хотите удалить эту запись?</p>
      <div class="modal-actions">
        <button id="confirm-delete" class="modal-delete-button">Удалить</button>
        <button id="cancel-delete" class="modal-cancel-button">Отмена</button>
      </div>
    </div>
  </div>
  
    </main>

    <footer>
        <p>© 2025 ООО "Улей Земли". Все права защищены.</p>
    </footer>

     <!-- JavaScript для работы модального окна -->
  <script>
    // Получает элементы
    var modal = document.getElementById("modal");
    var addButton = document.querySelector(".add-button");
    var closeButton = document.querySelector(".close-button");

    // Открыть модальное окно при клике на кнопку "Добавить пчелиную семью"
    addButton.addEventListener("click", function(event) {
        event.preventDefault(); // Предотвращает возможное действие по умолчанию
        modal.style.display = "block";
    });

    // Закрыть модальное окно при клике на крестик
    closeButton.addEventListener("click", function() {
        modal.style.display = "none";
    });

    // Закрыть модальное окно, если клик вне области содержимого
    window.addEventListener("click", function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    });

    // Модальное окно подтверждения удаления
    var deleteModal = document.getElementById("delete-modal");
    var deleteCloseButton = document.getElementById("delete-close-button");
    var confirmDeleteButton = document.getElementById("confirm-delete");
    var cancelDeleteButton = document.getElementById("cancel-delete");
    var currentRow = null; // Ссылка на строку, которую нужно удалить

    // При клике на любую кнопку "Удалить" в таблице
    var deleteButtons = document.querySelectorAll("table .delete-button");
    deleteButtons.forEach(function(button) {
      button.addEventListener("click", function(event) {
        event.preventDefault();
        // Определяет какую строку необходимо удалить (родительский элемент <tr>)
        currentRow = event.target.closest("tr");
        // Открывает модальное окно подтверждения удаления
        deleteModal.style.display = "block";
      });
    });

    // Если нажали кнопку "Отмена"
    cancelDeleteButton.addEventListener("click", function() {
      deleteModal.style.display = "none";
      currentRow = null;
    });

    // Если нажали кнопку "Удалить" в модальном окне
    confirmDeleteButton.addEventListener("click", function() {
      if (currentRow) {
        // Здесь я так понял настраивать удаление через БД
        currentRow.remove();
        currentRow = null;
      }
      deleteModal.style.display = "none";
    });

    // Закрыть модальное окно при клике вне области его содержимого
    window.addEventListener("click", function(event) {
      if (event.target == deleteModal) {
        deleteModal.style.display = "none";
        currentRow = null;
      }
    });
</script>
</body>
</html>
